parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"dY82":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=m;var t=l(require("react")),e=require("@mdx-js/react");function l(t){return t&&t.__esModule?t:{default:t}}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var l=arguments[e];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(t[d]=l[d])}return t}).apply(this,arguments)}const n=t=>(function(l){return console.warn("Component "+t+" was not imported, exported, or provided by MDXProvider as global scope"),(0,e.mdx)("div",l)}),x={},a="wrapper";function m({components:t,...l}){return(0,e.mdx)(a,d({},x,l,{components:t,mdxType:"MDXLayout"}),(0,e.mdx)("h1",null,"Keyboard"),(0,e.mdx)("p",null,"The keyboard device listens for user keypresses and then sends them to the processor for further handling."),(0,e.mdx)("h3",null,"Layout"),(0,e.mdx)("p",null,"The physical layout is modern, especially when compared with typical computers of the era where it often seemed as every computer had a different location for various symbols. Retroputer does have a few custom keys, but nothing that would be surprising to modern users."),(0,e.mdx)("p",null,(0,e.mdx)("img",d({parentName:"p"},{src:"../../images/unshifted-keyboard.png",alt:"Physical key placement"}))),(0,e.mdx)("table",null,(0,e.mdx)("thead",{parentName:"table"},(0,e.mdx)("tr",{parentName:"thead"},(0,e.mdx)("th",d({parentName:"tr"},{align:"left"}),"Retroputer Key"),(0,e.mdx)("th",d({parentName:"tr"},{align:"left"}),"macOS"),(0,e.mdx)("th",d({parentName:"tr"},{align:"left"}),"Windows"))),(0,e.mdx)("tbody",{parentName:"table"},(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"fn"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Cmd"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Windows")),(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"gr"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Opt"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Alt")),(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"ctrl"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Ctrl"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Ctrl")),(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"bksp"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Delete"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Backspace")),(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"enter"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Return"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Enter")),(0,e.mdx)("tr",{parentName:"tbody"},(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"caps"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Caps Lock"),(0,e.mdx)("td",d({parentName:"tr"},{align:"left"}),"Caps Lock")))),(0,e.mdx)("p",null,"Logically the keyboard is laid out in five rows of two quadrants. Each quadrant is represented by an I/O byte and can represent if a key is pressed by setting a bit ","(","or a key is not pressed by clearing the bit",")","."),(0,e.mdx)("p",null,(0,e.mdx)("img",d({parentName:"p"},{src:"../../images/keyboard-scan-codes.png",alt:"Logical Keyboard Layout"}))),(0,e.mdx)("p",null,"This makes it possible to detect if multiple keys are ",(0,e.mdx)("em",{parentName:"p"},"currently")," being pressed."),(0,e.mdx)("h3",null,"The ","[","GR","]"," Key"),(0,e.mdx)("p",null,"The ",(0,e.mdx)("strong",{parentName:"p"},"GR")," key enables you to type graphical characters with the keyboard. You can access an alternate set by pressing ",(0,e.mdx)("strong",{parentName:"p"},"GR"),"+",(0,e.mdx)("strong",{parentName:"p"},"SHIFT")," at the same time."),(0,e.mdx)("p",null,(0,e.mdx)("img",d({parentName:"p"},{src:"../../images/keyboard-gr-unshifted.png",alt:"Characters obtained with GR"}))),(0,e.mdx)("p",null,(0,e.mdx)("img",d({parentName:"p"},{src:"../../images/keyboard-gr-shifted.png",alt:"Characters obtained with GR and SHIFT"}))),(0,e.mdx)("h3",null,"The ","[","CTRL","]"," Key"),(0,e.mdx)("p",null,"The ",(0,e.mdx)("strong",{parentName:"p"},"CTRL")," key is used to translate keys to their corresponding control codes. This only works for alphabetical keys and a few numerical keys. ",(0,e.mdx)("strong",{parentName:"p"},"CTRL"),"+",(0,e.mdx)("strong",{parentName:"p"},"H")," will generate RetSCII code ",(0,e.mdx)("inlineCode",{parentName:"p"},"08"),", which corresponds to ",(0,e.mdx)("strong",{parentName:"p"},"BACKSPACE"),"."),(0,e.mdx)("p",null,"The following maps the ",(0,e.mdx)("strong",{parentName:"p"},"CTRL")," combination to the resulting control code."),(0,e.mdx)("table",null,(0,e.mdx)("thead",null,(0,e.mdx)("tr",null,(0,e.mdx)("th",{style:"text-align:left"},"CTRL +"),(0,e.mdx)("th",{style:"text-align:left"},"RetSCII Code"),(0,e.mdx)("th",{style:"text-align:left"},"Control Code"))),(0,e.mdx)("tbody",null,(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"A"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"01")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"B"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"02")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"C"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"03")),(0,e.mdx)("td",{style:"text-align:left"},"Break")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"D"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"04")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"E"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"05")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"F"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"06")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"G"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"07")),(0,e.mdx)("td",{style:"text-align:left"},"Bell")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"H"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"08")),(0,e.mdx)("td",{style:"text-align:left"},"Backspace")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"I"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"09")),(0,e.mdx)("td",{style:"text-align:left"},"Tab")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"J"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0A")),(0,e.mdx)("td",{style:"text-align:left"},"Line Feed")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"K"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0B")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"L"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0C")),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("p",null,"Form Feed /"),(0,e.mdx)("p",null,"Clear Screen"))),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"M"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0D")),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("p",null,"Carriage Return /"),(0,e.mdx)("p",null,"Enter"))),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"N"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0E")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"O"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"0F")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"P"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"10")),(0,e.mdx)("td",{style:"text-align:left"},"Cursor Right")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"Q"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"11")),(0,e.mdx)("td",{style:"text-align:left"},"Cursor Left")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"R"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"12")),(0,e.mdx)("td",{style:"text-align:left"},"F1")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"S"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"13")),(0,e.mdx)("td",{style:"text-align:left"},"F2")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"T"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"14")),(0,e.mdx)("td",{style:"text-align:left"},"F3")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"U"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"15")),(0,e.mdx)("td",{style:"text-align:left"},"F4")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"V"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"16")),(0,e.mdx)("td",{style:"text-align:left"},"F5")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"W"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"17")),(0,e.mdx)("td",{style:"text-align:left"},"F6")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"X"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"18")),(0,e.mdx)("td",{style:"text-align:left"},"F7")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"Y"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"19")),(0,e.mdx)("td",{style:"text-align:left"},"F8")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"Z"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1A")),(0,e.mdx)("td",{style:"text-align:left"},"F9")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1B")),(0,e.mdx)("td",{style:"text-align:left"},"F10")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"1"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1C")),(0,e.mdx)("td",{style:"text-align:left"},"N/A")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"2"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1D")),(0,e.mdx)("td",{style:"text-align:left"},"Delete")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"3"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1E")),(0,e.mdx)("td",{style:"text-align:left"},"Cursor Up")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"4"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("code",null,"1F")),(0,e.mdx)("td",{style:"text-align:left"},"Cursor Down")))),"### The Buffer",(0,e.mdx)("p",null,"Because it's possible that the computer won't have a chance to check for a keyboard character being registered during long computations, the keyboard has a 256-character buffer that will store these until they are read back. Once the user reaches the end of the buffer, additional key presses are lost."),(0,e.mdx)("h3",null,"Ports"),(0,e.mdx)("table",null,(0,e.mdx)("thead",null,(0,e.mdx)("tr",null,(0,e.mdx)("th",{style:"text-align:left"},"Port"),(0,e.mdx)("th",{style:"text-align:left"},"Name"),(0,e.mdx)("th",{style:"text-align:left"},"Notes"))),(0,e.mdx)("tbody",null,(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x30"),(0,e.mdx)("td",{style:"text-align:left"},"RetSCII code of key pressed"),(0,e.mdx)("td",{style:"text-align:left"},(0,e.mdx)("ul",null,(0,e.mdx)("li",null,"0x00 if no key pressed."),(0,e.mdx)("li",null,"Reading will clear the value.")))),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x31"),(0,e.mdx)("td",{style:"text-align:left"},"Buffer Remaining"),(0,e.mdx)("td",{style:"text-align:left"},"# of characters remaining in the buffer")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x32"),(0,e.mdx)("td",{style:"text-align:left"},"r0:0-7 keys pressed"),(0,e.mdx)("td",{style:"text-align:left"},"A set bit indicates the key is currently pressed. Zero indicates that it is up.")),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x33"),(0,e.mdx)("td",{style:"text-align:left"},"r0:8-F keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x34"),(0,e.mdx)("td",{style:"text-align:left"},"r1:0-7 keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x35"),(0,e.mdx)("td",{style:"text-align:left"},"r1:8-F keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x36"),(0,e.mdx)("td",{style:"text-align:left"},"r2:0-7 keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x37"),(0,e.mdx)("td",{style:"text-align:left"},"r2:8-F keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x38"),(0,e.mdx)("td",{style:"text-align:left"},"r3:0-7 keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x39"),(0,e.mdx)("td",{style:"text-align:left"},"r3:8-F keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3A"),(0,e.mdx)("td",{style:"text-align:left"},"r4:0-7 keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3B"),(0,e.mdx)("td",{style:"text-align:left"},"r4:8-F keys pressed"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3C"),(0,e.mdx)("td",{style:"text-align:left"},"–"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3D"),(0,e.mdx)("td",{style:"text-align:left"},"–"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3E"),(0,e.mdx)("td",{style:"text-align:left"},"–"),(0,e.mdx)("td",{style:"text-align:left"})),(0,e.mdx)("tr",null,(0,e.mdx)("td",{style:"text-align:left"},"0x3F"),(0,e.mdx)("td",{style:"text-align:left"},"–"),(0,e.mdx)("td",{style:"text-align:left"})))),(0,e.mdx)("h3",null,"Polling the keyboard"),(0,e.mdx)("p",null,"You can poll the keyboard for input as follows:"),(0,e.mdx)("ul",null,(0,e.mdx)("li",{parentName:"ul"},"Read the value of port 0x30"),(0,e.mdx)("li",{parentName:"ul"},"If it is non-zero, a key is in the buffer waiting to be processed",(0,e.mdx)("ul",{parentName:"li"},(0,e.mdx)("li",{parentName:"ul"},"You must immediately handle the key; checking the buffer will remove the key from the buffer."))),(0,e.mdx)("li",{parentName:"ul"},"Repeat!",(0,e.mdx)("ul",{parentName:"li"},(0,e.mdx)("li",{parentName:"ul"},"Call ",(0,e.mdx)("inlineCode",{parentName:"li"},"PUT_CHAR")," if you'd like to echo the results on screen.")))),(0,e.mdx)("pre",null,(0,e.mdx)("code",d({parentName:"pre"},{className:"language-text"}),".segment code 0x02000 {\n.const PUT_CHAR 0x0FE0C\n\ntop:\n    do {\n        in dl, 0x30\n        cmp dl, 0\n    } while z\n    call [PUT_CHAR]\n    br top\n}\n")))}m.isMDXComponent=!0;
},{"react":"SAdv","@mdx-js/react":"QaRW"}]},{},[], null)
//# sourceMappingURL=/keyboard.c958fb04.js.map