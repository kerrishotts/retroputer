10 CLS
20 RET = 30: GOTO 200
30 RET = 31: GOTO 350
31 IF SC%5=0 THEN RET=32:GOTO 300
32 RET = 33: GOTO 400
33 RET = 34: GOTO 450
34 CH=PEEK(1,6*SW+((SP-56)/16))
35 IF CH <> RD THEN IF CH <> 0 THEN GOTO 500
36 SC=SC+1: GOTO 30
200 REM INIT
205 LAYER 0 LINE 0: POKE 0,0x1101,25: POKE 0,0x1115,16
210 SPRITE 0 OFF SOURCE 24,0 TILESET 28 SIZE 3,3,1 LAYER 3 COLOR 15, 0
211 PRINT CHR$(0xDB);CHR$(0xCB);CHR$(0xDB);CHR$(0x20);CHR$(0x94);CHR$(0x20);CHR$(0xDE);CHR$(0xC1);CHR$(0xDD);
212 I = 0
213 POKE 6,I,PEEK(1,I):POKE 6,I+64,255:POKE 6,I+128,0
214 I = I + 1:IF I < 9 THEN GOTO 213
215 POKE 6,65,23: POKE 6,68, 20: POKE 6,71, 23
220 SPRITE 1 OFF SOURCE 24,1 TILESET 28 SIZE 5,1,1 LAYER 3 COLOR 23, 0
225 SPRITE 2 OFF SOURCE 24,1 TILESET 28 SIZE 5,1,1 LAYER 3 COLOR 9, 0
230 PRINT CHR$(27);"24";CHR$(19);
235 POKE 6,320,255:POKE 6,321,255: POKE 6,322,255: POKE 6,323,255: POKE 6,324,255
240 POKE 6,384,0: POKE 6,385,0: POKE 6,386,0: POKE 6,387,0: POKE 6,388,0
245 CLS:SPRITE 0 ON SIZE 3,3,1:SPRITE 1 ON AT 242, 48 SIZE 5,1,2:SPRITE 2 ON AT 244,50 SIZE 5,1,2
250 PRINT AT 2, 9;CHR$(27);"23";CHR$(18);"* ROAD  RACE *";
255 PRINT AT 3, 7;"ARROW KEYS TO MOVE";
257 PRINT AT 4, 8;"ANY KEY TO START";
260 X = 10: W = 8: SW = 32: RD = 32: SH = 219
261 GR = 158: GS = 159: P = 15: DL = 4: OL = 4
262 SP = 64+P*16: TSP=SP: SC = 0
265 SPRITE 0 AT SP-16, 128
267 PRET=RET:RET = 270: GOTO 300
270 ZZ = IN(0x30): IF ZZ = 0 THEN GOTO 270
280 GOTO PRET
300 REM UPDATE SCORE
310 POKE 6,256,(SC/10000)+48:POKE 6,257,((SC/1000)%10)+48:POKE 6,258,((SC/100)%10)+48:POKE 6,259,((SC/10)%10)+48:POKE 6,260,(SC%10)+48
320 GOTO RET
350 REM PRINT ROAD
360 RT = SW-X-W-2: IF RT < 0 THEN RT = 0
365 GOTO 370+((SC % 2)*10)
370 PRINT AT 24,0; CHR$(27);"10";CHR$(18);CHRS$(GR,X); CHR$(27);"23";CHR$(18);CHR$(SH); CHRS$(RD, W); CHR$(SH); CHR$(27);"10";CHR$(18);CHRS$(GR, RT);
375 GOTO RET
380 PRINT AT 24,0; CHR$(27);"02";CHR$(18);CHRS$(GS,X); CHR$(27);"20";CHR$(18);CHR$(SH); CHRS$(RD, W); CHR$(SH); CHR$(27);"02";CHR$(18);CHRS$(GS, RT);
385 GOTO RET
400 REM UPDATE ROAD
405 DL = DL - 1:IF DL = 0 THEN GOTO 420
410 GOTO RET
420 D = RND(11) - 5: DL = 3 + RND(OL)
425 X = X + D
430 IF X >= (SW-W-2) THEN X = SW-W-2
435 IF X <= 0 THEN X = 0
440 GOTO RET
450 REM UPDATE PLAYER
451 KY = IN(0x3B)
452 ZZ = IN(0x30)
453 IF KY = 0x20 THEN P=P+1: IF P>=(SW-1) THEN P=SW-1
454 IF KY = 0x08 THEN P=P-1: IF P<=0 THEN P=0
455 TSP = 64 + P * 16
456 IF SP = TSP THEN GOTO 460
457 IF SP < TSP THEN SP = SP + (TSP-SP)/2:GOTO 460
458 IF SP > TSP THEN SP = SP - (SP-TSP)/2:GOTO 460
459 SP = TSP
460 IF PEEK(6,0)<>0xFD THEN POKE 6,0,0xFD:POKE 6,2,0xFE:GOTO 470
465 POKE 6,0,0xFE:POKE 6,2,0xFD
470 SPRITE 0 AT SP-16, 112
471 GOTO RET
500 REM END OF GAME
501 PRINT AT 10, 0;SPC(160)
505 PRINT AT 11, 10;CHR$(27);"23";CHR$(18);"*** CRASH ***"
510 PRINT SPC(11);"SCORE:";SC
515 PRINT SPC(13);"AGAIN?"
520 I=0
521 POKE 6,I,rnd(128)+128:I=I+1:IF I<9 THEN GOTO 521
525 RET=530: GOTO 300
530 ZZ = IN(48): IF ZZ > 64 THEN IF Z < 128 THEN GOTO 540
535 GOTO 530
540 IF ZZ=89 THEN RUN
545 IF ZZ=121 THEN RUN
550 LAYER 0 LINE 1: POKE 0,0x1101,21: POKE 0,0x1115,18
555 CLS
560 SPRITE 0 OFF: SPRITE 1 OFF: SPRITE 2 OFF
